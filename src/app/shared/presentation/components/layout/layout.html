<div class="layout-container">
  <aside class="sidebar">
    <div class="sidebar-header">
      <h1 class="sidebar-title">{{ sidebarTitle() }}</h1>
      @if (!allResourcesUnlocked()) {
        <div class="progress-panel">
          <p class="progress-label">{{ 'sidebar.nextResourceIn' | translate }}</p>
          <div class="timer-display">{{ formattedTimeLeft() }}</div>
        </div>
      } @else {
        <div class="progress-panel">
          <p class="progress-label">{{ 'sidebar.allResourcesAvailable' | translate }}</p>
        </div>
      }
    </div>
    
    <nav class="sidebar-nav">
      @for (option of options; track option.label; let idx = $index) {
        <a 
          mat-button 
          [routerLink]="option.link" 
          routerLinkActive="active"
          class="nav-link"
          [class.locked]="isResourceLocked(idx)"
          [attr.aria-disabled]="isResourceLocked(idx) ? true : null"
          [tabIndex]="isResourceLocked(idx) ? -1 : 0">
          {{ option.label | translate }}
        </a>
      }
    </nav>
    
    <div class="sidebar-footer">
      @if (shouldShowContinueButton()) {
        <button 
          class="unlock-button" 
          type="button"
          (click)="onContinueToNextResource()">
          {{ 'sidebar.continueToNext' | translate }}
        </button>
      }
      <div class="replit-link-section">
        <a 
          href="https://replit.com/~" 
          target="_blank" 
          rel="noopener noreferrer"
          class="replit-link">
          <span class="replit-link-text">{{ 'sidebar.replit.link' | translate }}</span>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="replit-link-icon">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
        <p class="replit-link-hint">{{ 'sidebar.replit.hint' | translate }}</p>
      </div>
      <div class="footer-controls">
        <app-language-switcher/>
      </div>
    </div>
  </aside>
  
  <main class="main-content">
    <router-outlet/>
  </main>
</div>
